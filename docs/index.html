<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Language Model Agents in R for AI Workflows and Research • LLMAgentR</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Language Model Agents in R for AI Workflows and Research">
<meta name="description" content="Provides modular, graph-based agents powered by large language models (LLMs) for intelligent task execution in R. Supports structured workflows for tasks such as forecasting, data visualization, feature engineering, data wrangling, data cleaning, SQL, code generation, weather reporting, and research-driven question answering. Each agent performs iterative reasoning: recommending steps, generating R code, executing, debugging, and explaining results. Includes built-in support for packages such as tidymodels, modeltime, plotly, ggplot2, and prophet. Designed for analysts, developers, and teams building intelligent, reproducible AI workflows in R. Compatible with LLM providers such as OpenAI, Anthropic, Groq, and Ollama. Inspired by the Python package langagent.">
<meta property="og:description" content="Provides modular, graph-based agents powered by large language models (LLMs) for intelligent task execution in R. Supports structured workflows for tasks such as forecasting, data visualization, feature engineering, data wrangling, data cleaning, SQL, code generation, weather reporting, and research-driven question answering. Each agent performs iterative reasoning: recommending steps, generating R code, executing, debugging, and explaining results. Includes built-in support for packages such as tidymodels, modeltime, plotly, ggplot2, and prophet. Designed for analysts, developers, and teams building intelligent, reproducible AI workflows in R. Compatible with LLM providers such as OpenAI, Anthropic, Groq, and Ollama. Inspired by the Python package langagent.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">LLMAgentR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/knowusuboaky/LLMAgentR/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="llmagentr-">LLMAgentR <a href="https://knowusuboaky.github.io/LLMAgentR"><img src="reference/figures/llmaopenlogo.png" align="right" height="120"></a>
<a class="anchor" aria-label="anchor" href="#llmagentr-"></a>
</h1></div>
<!-- badges: start -->

<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p><strong>LLMAgentR</strong> is an R package for building <strong>Language Model Agents</strong> using a modular <strong>state graph</strong> execution framework. Inspired by LangGraph and LangChain architectures, it supports iterative workflows for research, data analysis, and automation.</p>
<hr>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"LLMAgentR"</span><span class="op">)</span></span></code></pre></div>
<hr>
</div>
<div class="section level2">
<h2 id="development-version">Development version<a class="anchor" aria-label="anchor" href="#development-version"></a>
</h2>
<p>To get the latest features or bug fixes, you can install the development version of <code>LLMAgentR</code> from GitHub:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># If needed</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"remotes"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"knowusuboaky/LLMAgentR"</span><span class="op">)</span></span></code></pre></div>
<p>See the full <a href="https://knowusuboaky.github.io/LLMAgentR/reference">function reference</a> or the <a href="https://knowusuboaky.github.io/LLMAgentR/">package website</a> for more details.</p>
<hr>
</div>
<div class="section level2">
<h2 id="environment-setup">Environment Setup<a class="anchor" aria-label="anchor" href="#environment-setup"></a>
</h2>
</div>
<div class="section level2">
<h2 id="api-setup">API Setup<a class="anchor" aria-label="anchor" href="#api-setup"></a>
</h2>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.setenv</a></span><span class="op">(</span></span>
<span>  OPENAI_API_KEY <span class="op">=</span> <span class="st">"your-key"</span>,</span>
<span>  GROQ_API_KEY <span class="op">=</span> <span class="st">"your-key"</span>,</span>
<span>  ANTHROPIC_API_KEY <span class="op">=</span> <span class="st">"your-key"</span>,</span>
<span>  TAVILY_API_KEY <span class="op">=</span> <span class="st">"your-key"</span>,</span>
<span>  OPENWEATHERMAP_API_KEY <span class="op">=</span> <span class="st">"your-key"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<hr>
</div>
<div class="section level2">
<h2 id="llm-support-minimal-wrapper">LLM Support (Minimal Wrapper)<a class="anchor" aria-label="anchor" href="#llm-support-minimal-wrapper"></a>
</h2>
<p>Load the package and either call an LLM directly or create a reusable wrapper:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load the chatLLM package</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/knowusuboaky/chatLLM" class="external-link">chatLLM</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Direct call example</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/chatLLM/man/call_llm.html" class="external-link">call_llm</a></span><span class="op">(</span></span>
<span>  prompt <span class="op">=</span> <span class="st">"Summarize the capital of France."</span>,</span>
<span>  provider <span class="op">=</span> <span class="st">"groq"</span>,</span>
<span>  model <span class="op">=</span> <span class="st">"llama3-8b"</span>,</span>
<span>  temperature <span class="op">=</span> <span class="fl">0.7</span>,</span>
<span>  max_tokens <span class="op">=</span> <span class="fl">200</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Silent Minimal wrapper around call_llm() with verbose option</span></span>
<span><span class="va">my_llm_wrapper</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">prompt</span>, <span class="va">verbose</span> <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="va">verbose</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">message</a></span><span class="op">(</span><span class="st">"[my_llm_wrapper] Sending prompt to LLM..."</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span>  </span>
<span>  <span class="co"># Suppress only the printing, NOT the return value</span></span>
<span>  <span class="va">response_text</span> <span class="op">&lt;-</span> <span class="kw">if</span> <span class="op">(</span><span class="va">verbose</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/chatLLM/man/call_llm.html" class="external-link">call_llm</a></span><span class="op">(</span></span>
<span>      prompt      <span class="op">=</span> <span class="va">prompt</span>,</span>
<span>      provider    <span class="op">=</span> <span class="st">"openai"</span>,</span>
<span>      model       <span class="op">=</span> <span class="st">"gpt-4o"</span>,</span>
<span>      max_tokens  <span class="op">=</span> <span class="fl">3000</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">suppressMessages</a></span><span class="op">(</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/warning.html" class="external-link">suppressWarnings</a></span><span class="op">(</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/pkg/chatLLM/man/call_llm.html" class="external-link">call_llm</a></span><span class="op">(</span></span>
<span>          prompt      <span class="op">=</span> <span class="va">prompt</span>,</span>
<span>          provider    <span class="op">=</span> <span class="st">"openai"</span>,</span>
<span>          model       <span class="op">=</span> <span class="st">"gpt-4o"</span>,</span>
<span>          max_tokens  <span class="op">=</span> <span class="fl">3000</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span>  </span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="va">verbose</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">message</a></span><span class="op">(</span><span class="st">"[my_llm_wrapper] Response received."</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span>  </span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="va">response_text</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<hr>
</div>
<div class="section level2">
<h2 id="id_-related-package-chatllm">📦 Related Package: <a href="https://cran.r-project.org/package=chatLLM" class="external-link"><code>chatLLM</code></a>
<a class="anchor" aria-label="anchor" href="#id_-related-package-chatllm"></a>
</h2>
<p>The <a href="https://github.com/knowusuboaky/chatLLM" class="external-link"><code>chatLLM</code></a> package (now available on CRAN 🎉) offers a modular interface for interacting with LLM providers including <strong>OpenAI</strong>, <strong>Groq</strong>, and <strong>Anthropic</strong>.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"chatLLM"</span><span class="op">)</span></span></code></pre></div>
<hr>
</div>
<div class="section level2">
<h2 id="agent-examples">Agent Examples<a class="anchor" aria-label="anchor" href="#agent-examples"></a>
</h2>
<div class="section level3">
<h3 id="id_1-code-generation-agent">1. Code Generation Agent<a class="anchor" aria-label="anchor" href="#id_1-code-generation-agent"></a>
</h3>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/knowusuboaky/LLMAgentR" class="external-link">LLMAgentR</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">coder_agent</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/build_code_agent.html">build_code_agent</a></span><span class="op">(</span></span>
<span>  llm <span class="op">=</span> <span class="va">my_llm_wrapper</span>,</span>
<span>  user_input <span class="op">=</span> <span class="st">"Write an R function to standardize numeric columns in a data frame using dplyr."</span>,</span>
<span>  max_tries <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  backoff <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="va">coder_agent</span><span class="op">$</span><span class="va">llm_response</span><span class="op">)</span></span>
<span><span class="co">#&gt; ```r</span></span>
<span><span class="co">#&gt; library(dplyr)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; # Function to standardize numeric columns in a data frame</span></span>
<span><span class="co">#&gt; standardize_numeric &lt;- function(data) {</span></span>
<span><span class="co">#&gt;   # Select only numeric columns</span></span>
<span><span class="co">#&gt;   numeric_cols &lt;- data %&gt;% select_if(is.numeric)</span></span>
<span><span class="co">#&gt;   </span></span>
<span><span class="co">#&gt;   # Standardize each numeric column</span></span>
<span><span class="co">#&gt;   standardized_data &lt;- numeric_cols %&gt;% </span></span>
<span><span class="co">#&gt;     mutate(across(everything(), ~ scale(.)))</span></span>
<span><span class="co">#&gt;   </span></span>
<span><span class="co">#&gt;   # Return the standardized data frame</span></span>
<span><span class="co">#&gt;   return(standardized_data)</span></span>
<span><span class="co">#&gt; }</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; # Example usage:</span></span>
<span><span class="co">#&gt; # data &lt;- data.frame(x = c(1, 2, 3), y = c(4, 5, 6))</span></span>
<span><span class="co">#&gt; # standardized_data &lt;- standardize_numeric(data)</span></span>
<span><span class="co">#&gt; # print(standardized_data)</span></span>
<span><span class="co">#&gt; ```</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ```markdown</span></span>
<span><span class="co">#&gt; Explanation:</span></span>
<span><span class="co">#&gt; - The function first selects only the numeric columns from the input data frame using select_if(is.numeric).</span></span>
<span><span class="co">#&gt; - Then, it standardizes each numeric column using the scale() function within the mutate(across()) function.</span></span>
<span><span class="co">#&gt; - The output is a data frame with standardized numeric columns.</span></span>
<span><span class="co">#&gt; - The function can be used by passing a data frame as an argument and storing the result in a new variable.</span></span>
<span><span class="co">#&gt; ```</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="id_2-sql-query-agent">2. SQL Query Agent<a class="anchor" aria-label="anchor" href="#id_2-sql-query-agent"></a>
</h3>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/knowusuboaky/LLMAgentR" class="external-link">LLMAgentR</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dbi.r-dbi.org" class="external-link">DBI</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rsqlite.r-dbi.org" class="external-link">RSQLite</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 1) Connect to the database</span></span>
<span><span class="va">conn</span> <span class="op">&lt;-</span> <span class="fu">DBI</span><span class="fu">::</span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbConnect.html" class="external-link">dbConnect</a></span><span class="op">(</span><span class="fu">RSQLite</span><span class="fu">::</span><span class="fu"><a href="https://rsqlite.r-dbi.org/reference/SQLite.html" class="external-link">SQLite</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"tests/testthat/test-data/northwind.db"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 2) Create the SQL agent</span></span>
<span><span class="va">sql_agent</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/build_sql_agent.html">build_sql_agent</a></span><span class="op">(</span></span>
<span>  model                    <span class="op">=</span> <span class="va">my_llm_wrapper</span>,</span>
<span>  connection               <span class="op">=</span> <span class="va">conn</span>,</span>
<span>  human_validation         <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  bypass_recommended_steps <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  bypass_explain_code      <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  verbose                  <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 3) Define the initial state</span></span>
<span><span class="va">initial_state</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  user_instructions <span class="op">=</span> <span class="st">"Identify the Regions (or Territories) with the highest CustomerCount and TotalSales. Return a table with columns: Region, CustomerCount, and TotalSales.</span></span>
<span><span class="st">Hint: (UnitPrice × Quantity)."</span>,</span>
<span>  max_retries       <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  retry_count       <span class="op">=</span> <span class="fl">0</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 4) Run the agent</span></span>
<span><span class="va">final_state</span> <span class="op">&lt;-</span> <span class="fu">sql_agent</span><span class="op">(</span><span class="va">initial_state</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 5) Inspect the final state structure</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">final_state</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="fu">cat</span>(final_state<span class="sc">$</span>sql_database_function)</span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a><span class="co">#&gt; ```r</span></span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a><span class="co">#&gt; sql_database_pipeline &lt;- function(connection) {</span></span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a><span class="co">#&gt;   library(DBI)</span></span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a><span class="co">#&gt;   query &lt;- "SELECT [c].[Region], </span></span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a><span class="co">#&gt;        COUNT(DISTINCT [o].[CustomerID]) AS [CustomerCount], </span></span>
<span id="cb9-7"><a href="#cb9-7" tabindex="-1"></a><span class="co">#&gt;        SUM([od].[UnitPrice] * [od].[Quantity]) AS [TotalSales]</span></span>
<span id="cb9-8"><a href="#cb9-8" tabindex="-1"></a><span class="co">#&gt; FROM [Customers] [c]</span></span>
<span id="cb9-9"><a href="#cb9-9" tabindex="-1"></a><span class="co">#&gt; JOIN [Orders] [o] ON [c].[CustomerID] = [o].[CustomerID]</span></span>
<span id="cb9-10"><a href="#cb9-10" tabindex="-1"></a><span class="co">#&gt; JOIN [Order Details] [od] ON [o].[OrderID] = [od].[OrderID]</span></span>
<span id="cb9-11"><a href="#cb9-11" tabindex="-1"></a><span class="co">#&gt; GROUP BY [c].[Region]</span></span>
<span id="cb9-12"><a href="#cb9-12" tabindex="-1"></a><span class="co">#&gt; ORDER BY [CustomerCount] DESC, [TotalSales] DESC;"</span></span>
<span id="cb9-13"><a href="#cb9-13" tabindex="-1"></a><span class="co">#&gt;   DBI::dbGetQuery(connection, query)</span></span>
<span id="cb9-14"><a href="#cb9-14" tabindex="-1"></a><span class="co">#&gt; }</span></span>
<span id="cb9-15"><a href="#cb9-15" tabindex="-1"></a><span class="co">#&gt; ```</span></span>
<span id="cb9-16"><a href="#cb9-16" tabindex="-1"></a></span>
<span id="cb9-17"><a href="#cb9-17" tabindex="-1"></a><span class="fu">cat</span>(final_state<span class="sc">$</span>sql_query_code)</span>
<span id="cb9-18"><a href="#cb9-18" tabindex="-1"></a><span class="co">#&gt; ```sql</span></span>
<span id="cb9-19"><a href="#cb9-19" tabindex="-1"></a><span class="co">#&gt; SELECT [c].[Region], </span></span>
<span id="cb9-20"><a href="#cb9-20" tabindex="-1"></a><span class="co">#&gt;        COUNT(DISTINCT [o].[CustomerID]) AS [CustomerCount], </span></span>
<span id="cb9-21"><a href="#cb9-21" tabindex="-1"></a><span class="co">#&gt;        SUM([od].[UnitPrice] * [od].[Quantity]) AS [TotalSales]</span></span>
<span id="cb9-22"><a href="#cb9-22" tabindex="-1"></a><span class="co">#&gt; FROM [Customers] [c]</span></span>
<span id="cb9-23"><a href="#cb9-23" tabindex="-1"></a><span class="co">#&gt; JOIN [Orders] [o] ON [c].[CustomerID] = [o].[CustomerID]</span></span>
<span id="cb9-24"><a href="#cb9-24" tabindex="-1"></a><span class="co">#&gt; JOIN [Order Details] [od] ON [o].[OrderID] = [od].[OrderID]</span></span>
<span id="cb9-25"><a href="#cb9-25" tabindex="-1"></a><span class="co">#&gt; GROUP BY [c].[Region]</span></span>
<span id="cb9-26"><a href="#cb9-26" tabindex="-1"></a><span class="co">#&gt; ORDER BY [CustomerCount] DESC, [TotalSales] DESC;</span></span>
<span id="cb9-27"><a href="#cb9-27" tabindex="-1"></a><span class="co">#&gt;```</span></span>
<span id="cb9-28"><a href="#cb9-28" tabindex="-1"></a></span>
<span id="cb9-29"><a href="#cb9-29" tabindex="-1"></a>View the extracted data</span>
<span id="cb9-30"><a href="#cb9-30" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(final_state<span class="sc">$</span>data_sql)</span>
<span id="cb9-31"><a href="#cb9-31" tabindex="-1"></a><span class="co">#&gt; print(df)</span></span>
<span id="cb9-32"><a href="#cb9-32" tabindex="-1"></a><span class="co">#&gt;            Region CustomerCount TotalSales</span></span>
<span id="cb9-33"><a href="#cb9-33" tabindex="-1"></a><span class="co">#&gt; 1   Western Europe            28  133709032</span></span>
<span id="cb9-34"><a href="#cb9-34" tabindex="-1"></a><span class="co">#&gt; 2    South America            16   79472305</span></span>
<span id="cb9-35"><a href="#cb9-35" tabindex="-1"></a><span class="co">#&gt; 3    North America            16   76826352</span></span>
<span id="cb9-36"><a href="#cb9-36" tabindex="-1"></a><span class="co">#&gt; 4  Southern Europe            10   47563030</span></span>
<span id="cb9-37"><a href="#cb9-37" tabindex="-1"></a><span class="co">#&gt; 5    British Isles             8   38700520</span></span>
<span id="cb9-38"><a href="#cb9-38" tabindex="-1"></a><span class="co">#&gt; 6  Central America             5   24802774</span></span>
<span id="cb9-39"><a href="#cb9-39" tabindex="-1"></a><span class="co">#&gt; 7  Northern Europe             4   19015224</span></span>
<span id="cb9-40"><a href="#cb9-40" tabindex="-1"></a><span class="co">#&gt; 8      Scandinavia             3   13902226</span></span>
<span id="cb9-41"><a href="#cb9-41" tabindex="-1"></a><span class="co">#&gt; 9             &lt;NA&gt;             2    9745371</span></span>
<span id="cb9-42"><a href="#cb9-42" tabindex="-1"></a><span class="co">#&gt; 10  Eastern Europe             1    4738465</span></span>
<span id="cb9-43"><a href="#cb9-43" tabindex="-1"></a><span class="co">#&gt;</span></span>
<span id="cb9-44"><a href="#cb9-44" tabindex="-1"></a>Disconnect it when done</span>
<span id="cb9-45"><a href="#cb9-45" tabindex="-1"></a><span class="co">#&gt;DBI::dbDisconnect(conn)</span></span>
<span id="cb9-46"><a href="#cb9-46" tabindex="-1"></a><span class="co">#&gt;</span></span>
<span id="cb9-47"><a href="#cb9-47" tabindex="-1"></a>View the explanation generated by the agent</span>
<span id="cb9-48"><a href="#cb9-48" tabindex="-1"></a><span class="fu">cat</span>(final_state<span class="sc">$</span>messages[[<span class="dv">1</span>]]<span class="sc">$</span>content)</span>
<span id="cb9-49"><a href="#cb9-49" tabindex="-1"></a><span class="co">#&gt; # SQL Database Agent:</span></span>
<span id="cb9-50"><a href="#cb9-50" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb9-51"><a href="#cb9-51" tabindex="-1"></a><span class="co">#&gt; The SQL steps in the provided function can be broken down as follows:</span></span>
<span id="cb9-52"><a href="#cb9-52" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb9-53"><a href="#cb9-53" tabindex="-1"></a><span class="co">#&gt; 1. **SELECT Clause**: Specifies the columns:</span></span>
<span id="cb9-54"><a href="#cb9-54" tabindex="-1"></a><span class="co">#&gt;    - `[c].[Region]`: Region of the customers.</span></span>
<span id="cb9-55"><a href="#cb9-55" tabindex="-1"></a><span class="co">#&gt;    - `COUNT(DISTINCT [o].[CustomerID]) AS [CustomerCount]`: Distinct customers.</span></span>
<span id="cb9-56"><a href="#cb9-56" tabindex="-1"></a><span class="co">#&gt;    - `SUM([od].[UnitPrice] * [od].[Quantity]) AS [TotalSales]`: Total sales amount.</span></span>
<span id="cb9-57"><a href="#cb9-57" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb9-58"><a href="#cb9-58" tabindex="-1"></a><span class="co">#&gt; 2. **FROM Clause**: Lists involved tables:</span></span>
<span id="cb9-59"><a href="#cb9-59" tabindex="-1"></a><span class="co">#&gt;    - `Customers [c]`, `Orders [o]`, `Order Details [od]`.</span></span>
<span id="cb9-60"><a href="#cb9-60" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb9-61"><a href="#cb9-61" tabindex="-1"></a><span class="co">#&gt; 3. **JOIN Clauses**: Joins the tables using customer and order IDs.</span></span>
<span id="cb9-62"><a href="#cb9-62" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb9-63"><a href="#cb9-63" tabindex="-1"></a><span class="co">#&gt; 4. **GROUP BY Clause**: Groups by `[c].[Region]`.</span></span>
<span id="cb9-64"><a href="#cb9-64" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb9-65"><a href="#cb9-65" tabindex="-1"></a><span class="co">#&gt; 5. **ORDER BY Clause**: Sorts by customer count descending, then total sales descending.</span></span>
<span id="cb9-66"><a href="#cb9-66" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb9-67"><a href="#cb9-67" tabindex="-1"></a><span class="co">#&gt; 6. **DBI::dbGetQuery()**: Executes the query and fetches the data.</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="id_3-research-agent">3. Research Agent<a class="anchor" aria-label="anchor" href="#id_3-research-agent"></a>
</h3>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/knowusuboaky/LLMAgentR" class="external-link">LLMAgentR</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Initialize researcher agent</span></span>
<span><span class="va">researcher_agent</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/build_researcher_agent.html">build_researcher_agent</a></span><span class="op">(</span></span>
<span>  llm <span class="op">=</span> <span class="va">my_llm_wrapper</span>,</span>
<span>  tavily_search <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  system_prompt <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  max_results <span class="op">=</span> <span class="fl">5</span>,</span>
<span>  max_tries <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  backoff <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Perform research</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu">researcher_agent</span><span class="op">(</span><span class="st">"Who is Messi?"</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="va">result</span><span class="op">$</span><span class="va">response</span><span class="op">)</span></span>
<span><span class="co">#&gt; ```markdown</span></span>
<span><span class="co">#&gt; **Summary**: Lionel Messi is an Argentine professional footballer widely regarded as one of the greatest players of all time. He plays as a forward for Inter Miami in Major League Soccer and captains the Argentina national team.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; **Key Facts**:</span></span>
<span><span class="co">#&gt; - Born on June 24, 1987, in Rosario, Argentina.</span></span>
<span><span class="co">#&gt; - Has won eight Ballon d'Or awards, more than any other player.</span></span>
<span><span class="co">#&gt; - All-time leading goalscorer and most-capped player for Argentina.</span></span>
<span><span class="co">#&gt; - Has won 45 team trophies, making him the most decorated player in professional football history.</span></span>
<span><span class="co">#&gt; - Known for his exceptional dribbling, playmaking, and goalscoring abilities.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; **Context**: Messi's career began at FC Barcelona, where he spent over 20 years and became a global football icon. His playing style and achievements have drawn comparisons to Diego Maradona, and he has been recognized as one of the most influential figures in football history.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; **Sources**:</span></span>
<span><span class="co">#&gt; - [Lionel Messi - Wikipedia](https://en.wikipedia.org/wiki/Lionel_Messi)</span></span>
<span><span class="co">#&gt; - [Career of Lionel Messi - Wikipedia](https://en.wikipedia.org/wiki/Career_of_Lionel_Messi)</span></span>
<span><span class="co">#&gt; ```</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="id_4-interpreter-agent">4. Interpreter Agent<a class="anchor" aria-label="anchor" href="#id_4-interpreter-agent"></a>
</h3>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/knowusuboaky/LLMAgentR" class="external-link">LLMAgentR</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Example table or code output</span></span>
<span><span class="va">output_text</span> <span class="op">&lt;-</span> <span class="st">"</span></span>
<span><span class="st">| Region  | Sales | Profit |</span></span>
<span><span class="st">|---------|-------|--------|</span></span>
<span><span class="st">| North   |  2000 |   300  |</span></span>
<span><span class="st">| South   |  1500 |   250  |</span></span>
<span><span class="st">| East    |  1800 |   400  |</span></span>
<span><span class="st">| West    |  2200 |   100  |</span></span>
<span><span class="st">"</span></span>
<span></span>
<span><span class="co"># Build interpreter agent</span></span>
<span><span class="va">interpreter_agent</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/build_interpreter_agent.html">build_interpreter_agent</a></span><span class="op">(</span></span>
<span>  llm <span class="op">=</span> <span class="va">my_llm_wrapper</span>,</span>
<span>  code_output <span class="op">=</span> <span class="va">output_text</span>,</span>
<span>  max_tries <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  backoff <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="va">interpreter_agent</span><span class="op">$</span><span class="va">interpretation</span><span class="op">)</span></span>
<span><span class="co">#&gt; **1. Interpretation**:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; The provided output is a data table detailing sales and profits across four different regions: North, South, East, and West.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; - **Sales Analysis**: Among the four regions, the West region has the highest sales at 2200 units, followed by the North with 2000 units. The East region has sales of 1800 units, and the South region has the lowest sales at 1500 units. This suggests that the West region is the most successful in terms of sales volume.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; - **Profit Analysis**: When examining profit, the East region leads with a profit of 400 units, despite not having the highest sales. The North region follows with a profit of 300 units. The South region has a profit of 250 units, and the West region, despite having the highest sales, has the lowest profit at 100 units. This indicates that the East region is the most profitable and that the West region, although successful in sales, might have higher costs or lower margins affecting its profitability.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; - **Relationship between Sales and Profit**: There is no direct correlation between sales volume and profit level in this dataset. For instance, the West region, which has the highest sales, does not have the highest profit, which is held by the East region. This suggests that factors other than sales volume, such as cost structures or pricing strategies, might be affecting profitability across these regions.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; **2. Key Takeaways**:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; - The West region excels in sales, while the East region is the most profitable, indicating efficiency in converting sales to profit.</span></span>
<span><span class="co">#&gt; - Despite high sales, the West region's profitability is low, suggesting potential areas for cost optimization or pricing adjustments.</span></span>
<span><span class="co">#&gt; - There is no straightforward relationship between sales and profit, highlighting the need for a balanced approach in managing both sales strategies and cost efficiencies to maximize profitability.</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="id_5-document-summarizer">5. Document Summarizer<a class="anchor" aria-label="anchor" href="#id_5-document-summarizer"></a>
</h3>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/knowusuboaky/LLMAgentR" class="external-link">LLMAgentR</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ardata-fr.github.io/officeverse/" class="external-link">officer</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ropensci.r-universe.dev/pdftools" class="external-link">pdftools</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://glue.tidyverse.org/" class="external-link">glue</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://purrr.tidyverse.org/" class="external-link">purrr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://stringr.tidyverse.org" class="external-link">stringr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://xml2.r-lib.org" class="external-link">xml2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rvest.tidyverse.org/" class="external-link">rvest</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/tesseract/" class="external-link">tesseract</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Build document summarizer agent</span></span>
<span><span class="va">summarizer_agent</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/build_doc_summarizer_agent.html">build_doc_summarizer_agent</a></span><span class="op">(</span></span>
<span>  llm <span class="op">=</span> <span class="va">my_llm_wrapper</span>,</span>
<span>  summary_template <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  chunk_size <span class="op">=</span> <span class="fl">4000</span>,</span>
<span>  overlap <span class="op">=</span> <span class="fl">200</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Summarize document</span></span>
<span><span class="va">final_state</span> <span class="op">&lt;-</span> <span class="fu">summarizer_agent</span><span class="op">(</span><span class="st">"https://github.com/knowusuboaky/LLMAgentR/raw/main/tests/testthat/test-data/scrum.docx"</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="va">final_state</span><span class="op">$</span><span class="va">summary</span><span class="op">)</span></span>
<span><span class="co">#&gt; # Key Findings</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; - **Scrum Framework**: This worksheet serves as a practical guide to help teams work with the Scrum framework without needing a specific Scrum tool.</span></span>
<span><span class="co">#&gt; - **Steps Involved**: The document outlines a step-by-step approach to implementing Scrum, covering roles such as **Product Owner**, **Scrum Master**, and **Developer Team**.</span></span>
<span><span class="co">#&gt; - **Course Connection**: This resource is part of the 'Getting Started with Scrum' course aimed at beginners including **Developers**, **Scrum Masters**, and **Product Owners**.</span></span>
<span><span class="co">#&gt; - **Practical Tool Selection**: The document emphasizes the use of tools integrated with existing development platforms, such as **Azure DevOps** for teams using Visual Studio.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ## Methodology</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; - **Structured Steps**:</span></span>
<span><span class="co">#&gt;   - Step 1: Select a **Product Owner**</span></span>
<span><span class="co">#&gt;   - Step 2: Define **Project Details**</span></span>
<span><span class="co">#&gt;   - Step 3: Select a **Scrum Master**</span></span>
<span><span class="co">#&gt;   - Step 4: Select the **Developer Team**</span></span>
<span><span class="co">#&gt;   - Step 5: Choose the **Tool to Run Sprint**</span></span>
<span><span class="co">#&gt;   - Step 6: Prepare the **Sprint Tool**</span></span>
<span><span class="co">#&gt;   - Step 7: Create a **Sprint Board**</span></span>
<span><span class="co">#&gt;   - Step 8: Develop the **Product Backlog**</span></span>
<span><span class="co">#&gt;   - Step 9: Prioritize **Product Backlog Items**</span></span>
<span><span class="co">#&gt;   - Step 10: Plan the **First Sprint**</span></span>
<span><span class="co">#&gt;   - Step 11: Conduct the **Sprint Planning Meeting**</span></span>
<span><span class="co">#&gt;   - Step 12: Estimate the **Sprint Backlog Items**</span></span>
<span><span class="co">#&gt;   - Step 13: Implement the **Sprint Backlog Items**</span></span>
<span><span class="co">#&gt;   - Step 14: Conduct **Daily Stand-up Meetings**</span></span>
<span><span class="co">#&gt;   - Step 15: Hold the **Sprint Review Meeting**</span></span>
<span><span class="co">#&gt;   - Step 16: Conduct the **Sprint Retrospective Meeting**</span></span>
<span><span class="co">#&gt;   - Step 17: **Repeat the Process** Sprint after Sprint</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; - **Tool Integration**:</span></span>
<span><span class="co">#&gt;   - ```code</span></span>
<span><span class="co">#&gt;     Selected Tool: Azure DevOps</span></span>
<span><span class="co">#&gt;     Reasons: Product development based on Visual Studio with deep integration with Azure DevOps; use of Azure Repos for source control management; potential for CI/CD extension.</span></span>
<span><span class="co">#&gt;     ```</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; - **Meeting Structures**:</span></span>
<span><span class="co">#&gt;   - **Sprint Planning Meeting**: Defined goals and work items</span></span>
<span><span class="co">#&gt;   - **Daily Stand-ups**: Address impediments and responsibilities</span></span>
<span><span class="co">#&gt;   - **Sprint Review**: Analyze completed tasks and process improvements</span></span>
<span><span class="co">#&gt;   - **Retrospective Meetings**: Reflect on successes and areas for improvement</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ## Conclusions</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; - **Comprehensive Guide**: The worksheet is a detailed resource providing a structured approach to implementing Scrum, making it suitable for teams new to the framework.</span></span>
<span><span class="co">#&gt; - **Adaptability**: Users are encouraged to adjust the steps and tools to better fit their specific needs and context.</span></span>
<span><span class="co">#&gt; - **Effective Start**: By following the steps outlined, teams can effectively start using Scrum to manage their projects, enhancing productivity and collaboration.</span></span>
<span><span class="co">#&gt; - **Continuous Improvement**: Emphasizes the importance of iterating and refining the process through regular retrospectives and feedback loops.</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="id_6-data-cleaning-agent">6. Data Cleaning Agent<a class="anchor" aria-label="anchor" href="#id_6-data-cleaning-agent"></a>
</h3>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/knowusuboaky/LLMAgentR" class="external-link">LLMAgentR</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 1) Load the data</span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="st">"tests/testthat/test-data/churn_data.csv"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 2) Create the agent</span></span>
<span><span class="va">data_cleaner_agent</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/build_data_cleaning_agent.html">build_data_cleaning_agent</a></span><span class="op">(</span></span>
<span>  model <span class="op">=</span> <span class="va">my_llm_wrapper</span>,</span>
<span>  human_validation <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  bypass_recommended_steps <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  bypass_explain_code <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 3) Define the initial state</span></span>
<span><span class="va">initial_state</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  data_raw <span class="op">=</span> <span class="va">data</span>,</span>
<span>  user_instructions <span class="op">=</span> <span class="st">"Don't remove outliers when cleaning the data."</span>,</span>
<span>  max_retries <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  retry_count <span class="op">=</span> <span class="fl">0</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 4) Run the agent</span></span>
<span><span class="va">final_state</span> <span class="op">&lt;-</span> <span class="fu">data_cleaner_agent</span><span class="op">(</span><span class="va">initial_state</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 5) Convert cleaned output to data.frame</span></span>
<span><span class="va">cleaned_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="va">final_state</span><span class="op">$</span><span class="va">data_cleaned</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 6) View the cleaned data (first 10 rows)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">cleaned_df</span>, <span class="fl">10</span><span class="op">)</span></span>
<span><span class="co">#&gt;   customerid gender seniorcitizen partner dependents tenure phoneservice    multiplelines</span></span>
<span><span class="co">#&gt; 1  7590-VHVEG Female             0     Yes         No      1           No No phone service</span></span>
<span><span class="co">#&gt; 2  5575-GNVDE   Male             0      No         No     34          Yes               No</span></span>
<span><span class="co">#&gt; 3  3668-QPYBK   Male             0      No         No      2          Yes               No</span></span>
<span><span class="co">#&gt; 4  7795-CFOCW   Male             0      No         No     45           No No phone service</span></span>
<span><span class="co">#&gt; 5  9237-HQITU Female             0      No         No      2          Yes               No</span></span>
<span><span class="co">#&gt; 6  9305-CDSKC Female             0      No         No      8          Yes              Yes</span></span>
<span><span class="co">#&gt; 7  1452-KIOVK   Male             0      No        Yes     22          Yes              Yes</span></span>
<span><span class="co">#&gt; 8  6713-OKOMC Female             0      No         No     10           No No phone service</span></span>
<span><span class="co">#&gt; 9  7892-POOKP Female             0     Yes         No     28          Yes              Yes</span></span>
<span><span class="co">#&gt; 10 6388-TABGU   Male             0      No        Yes     62          Yes               No</span></span>
<span><span class="co">#&gt; (…other columns truncated for brevity…)</span></span>
<span></span>
<span><span class="co"># 7) View the explanation from the LLM</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="va">final_state</span><span class="op">$</span><span class="va">messages</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">content</span><span class="op">)</span></span>
<span><span class="co">#&gt; # Data Cleaning Agent:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; The `data_cleaner` function performs a series of data cleaning steps:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; 1. **Validate Input**: Ensure input is a data.frame or tibble.</span></span>
<span><span class="co">#&gt; 2. **Load tidyverse**: Stop if not installed.</span></span>
<span><span class="co">#&gt; 3. **Convert to tibble**.</span></span>
<span><span class="co">#&gt; 4. **Drop High-NA and Zero-Variance Columns**.</span></span>
<span><span class="co">#&gt; 5. **Remove All-NA Rows**.</span></span>
<span><span class="co">#&gt; 6. **Impute NAs**: Numeric -&gt; mean, Character -&gt; "Unknown".</span></span>
<span><span class="co">#&gt; 7. **Convert 'TotalCharges' to Numeric**.</span></span>
<span><span class="co">#&gt; 8. **Rename &amp; Parse**: Lowercase and parse dates.</span></span>
<span><span class="co">#&gt; 9. **Deduplicate Rows**.</span></span>
<span><span class="co">#&gt; 10. **Remove Remaining NAs**.</span></span>
<span><span class="co">#&gt; 11. **Reorder Factor Levels** alphabetically.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Cleaned data is returned as a tibble.</span></span>
<span></span>
<span><span class="co"># 8) View the cleaned R function generated by the agent</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="va">final_state</span><span class="op">$</span><span class="va">data_cleaner_function</span><span class="op">)</span></span>
<span><span class="co">#&gt; ```r</span></span>
<span><span class="co">#&gt; data_cleaner &lt;- function(data_raw) {</span></span>
<span><span class="co">#&gt;   # 1. Validate input</span></span>
<span><span class="co">#&gt;   if (!is.data.frame(data_raw)) stop("`data_raw` must be a data.frame or tibble.")</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   # 2. Load tidyverse</span></span>
<span><span class="co">#&gt;   if (!requireNamespace("tidyverse", quietly = TRUE)) stop("Package 'tidyverse' is required but not installed.")</span></span>
<span><span class="co">#&gt;   suppressWarnings(suppressPackageStartupMessages(library(tidyverse)))</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   # 3. Convert to tibble</span></span>
<span><span class="co">#&gt;   data_cleaned &lt;- tibble::as_tibble(data_raw)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   # 4. Drop high‐NA &amp; zero‐var columns</span></span>
<span><span class="co">#&gt;   data_cleaned &lt;- data_cleaned %&gt;%</span></span>
<span><span class="co">#&gt;     dplyr::select(dplyr::where(~ mean(is.na(.)) &lt; 0.4)) %&gt;%</span></span>
<span><span class="co">#&gt;     dplyr::select(dplyr::where(~ dplyr::n_distinct(.) &gt; 1))</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   # 5. Remove all‐NA rows</span></span>
<span><span class="co">#&gt;   data_cleaned &lt;- data_cleaned %&gt;%</span></span>
<span><span class="co">#&gt;     dplyr::filter(!dplyr::if_all(dplyr::everything(), ~ is.na(.)))</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   # 6. Impute NAs</span></span>
<span><span class="co">#&gt;   data_cleaned &lt;- data_cleaned %&gt;%</span></span>
<span><span class="co">#&gt;     dplyr::mutate(</span></span>
<span><span class="co">#&gt;       dplyr::across(dplyr::where(is.numeric), ~ dplyr::if_else(is.na(.), mean(., na.rm = TRUE), .)),</span></span>
<span><span class="co">#&gt;       dplyr::across(dplyr::where(is.character), ~ dplyr::if_else(is.na(.), "Unknown", stringr::str_squish(stringr::str_trim(.))))</span></span>
<span><span class="co">#&gt;     )</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   # 7. Convert TotalCharges to numeric</span></span>
<span><span class="co">#&gt;   if ("TotalCharges" %in% colnames(data_cleaned)) {</span></span>
<span><span class="co">#&gt;     data_cleaned &lt;- data_cleaned %&gt;%</span></span>
<span><span class="co">#&gt;       dplyr::mutate(TotalCharges = as.numeric(TotalCharges))</span></span>
<span><span class="co">#&gt;   }</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   # 8. Rename &amp; parse</span></span>
<span><span class="co">#&gt;   data_cleaned &lt;- data_cleaned %&gt;%</span></span>
<span><span class="co">#&gt;     dplyr::rename_with(~ stringr::str_replace_all(stringr::str_to_lower(.), "[^a-z0-9]+", "_")) %&gt;%</span></span>
<span><span class="co">#&gt;     dplyr::mutate(dplyr::across(dplyr::contains("date"), ~ readr::parse_date(., guess_formats(., c("Ymd","mdY","dmY")))))</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   # 9. Dedup</span></span>
<span><span class="co">#&gt;   data_cleaned &lt;- data_cleaned %&gt;%</span></span>
<span><span class="co">#&gt;     dplyr::distinct()</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   # 10. Remove rows with any remaining NAs</span></span>
<span><span class="co">#&gt;   data_cleaned &lt;- data_cleaned %&gt;%</span></span>
<span><span class="co">#&gt;     dplyr::filter(!dplyr::if_any(dplyr::everything(), is.na))</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   # 11. Re‐order factor levels</span></span>
<span><span class="co">#&gt;   data_cleaned &lt;- data_cleaned %&gt;%</span></span>
<span><span class="co">#&gt;     dplyr::mutate(dplyr::across(dplyr::where(is.factor), ~ forcats::fct_relevel(., sort(levels(.)))))</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   return(data_cleaned)</span></span>
<span><span class="co">#&gt; }</span></span>
<span><span class="co">#&gt; ```</span></span>
<span></span>
<span><span class="co"># 9) Show the name of the generated function</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="va">final_state</span><span class="op">$</span><span class="va">data_cleaner_function_name</span><span class="op">)</span></span>
<span><span class="co">#&gt; data_cleaner</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="id_7-forecasting-agent">7. Forecasting Agent<a class="anchor" aria-label="anchor" href="#id_7-forecasting-agent"></a>
</h3>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/knowusuboaky/LLMAgentR" class="external-link">LLMAgentR</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rlang.r-lib.org" class="external-link">rlang</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://lubridate.tidyverse.org" class="external-link">lubridate</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tibble.tidyverse.org/" class="external-link">tibble</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org" class="external-link">tidyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidymodels.tidymodels.org" class="external-link">tidymodels</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 2) Prepare the dataset</span></span>
<span><span class="va">my_data</span> <span class="op">&lt;-</span> <span class="va">walmart_sales_weekly</span></span>
<span></span>
<span><span class="co"># 3) Create the forecasting agent</span></span>
<span><span class="va">forecasting_agent</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/build_forecasting_agent.html">build_forecasting_agent</a></span><span class="op">(</span></span>
<span>  model <span class="op">=</span> <span class="va">my_llm_wrapper</span>,</span>
<span>  bypass_recommended_steps <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  bypass_explain_code <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  mode <span class="op">=</span> <span class="st">"dark"</span>, <span class="co">#dark or light</span></span>
<span>  line_width <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 4) Define the initial state</span></span>
<span><span class="va">initial_state</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  user_instructions <span class="op">=</span> <span class="st">"Forecast sales for the next 30 days, using `id` as the grouping variable, a forecasting horizon of 30, and a confidence level of 90%."</span>,</span>
<span>  data_raw <span class="op">=</span> <span class="va">my_data</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 5) Run the agent</span></span>
<span><span class="va">final_state</span> <span class="op">&lt;-</span> <span class="fu">forecasting_agent</span><span class="op">(</span><span class="va">initial_state</span><span class="op">)</span></span></code></pre></div>
<hr>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 6) View forecast parameters</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">final_state</span><span class="op">$</span><span class="va">forecasting_params</span><span class="op">)</span></span>
<span><span class="co">#&gt; List of 5</span></span>
<span><span class="co">#&gt;  $ params_value      : chr "Weekly_Sales"</span></span>
<span><span class="co">#&gt;  $ params_date       : chr "Date"</span></span>
<span><span class="co">#&gt;  $ params_group      : chr "id"</span></span>
<span><span class="co">#&gt;  $ params_horizon    : num 30</span></span>
<span><span class="co">#&gt;  $ params_conf_level : num 0.9</span></span>
<span><span class="co">#&gt;```</span></span>
<span><span class="co">#&gt;</span></span>
<span><span class="co">#&gt;```r</span></span>
<span><span class="co"># 7) View the forecast results (first few rows)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">final_state</span><span class="op">$</span><span class="va">forecasting_data</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 6 × 5</span></span>
<span><span class="co">#&gt;   id    date        value conf_lo conf_hi</span></span>
<span><span class="co">#&gt;   &lt;fct&gt; &lt;date&gt;      &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 1_1   2010-02-05 24924.      NA      NA</span></span>
<span><span class="co">#&gt; 2 1_1   2010-02-12 46039.      NA      NA</span></span>
<span><span class="co">#&gt; 3 1_1   2010-02-19 41596.      NA      NA</span></span>
<span><span class="co">#&gt; 4 1_1   2010-02-26 19404.      NA      NA</span></span>
<span><span class="co">#&gt; 5 1_1   2010-03-05 21828.      NA      NA</span></span>
<span><span class="co">#&gt; 6 1_1   2010-03-12 21043.      NA      NA</span></span>
<span><span class="co">#&gt;```</span></span>
<span><span class="co">#&gt;</span></span>
<span><span class="co">#&gt;```r</span></span>
<span><span class="co"># 8) View the forecast summary explanation</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="va">final_state</span><span class="op">$</span><span class="va">forecasting_report</span><span class="op">)</span></span>
<span><span class="co">#&gt; The provided blueprint outlines a comprehensive approach to forecasting...</span></span>
<span><span class="co">#&gt; (blueprint explaining models, recipes, ensemble strategy, grouping, etc.)</span></span>
<span><span class="co">#&gt;```</span></span>
<span><span class="co">#&gt;</span></span>
<span><span class="co">#&gt;```r</span></span>
<span><span class="co"># 9) Display the forecast plot</span></span>
<span><span class="va">final_state</span><span class="op">$</span><span class="va">forecasting_result</span></span>
<span><span class="co">#&gt;```</span></span>
<span><span class="co">#&gt;</span></span>
<span><span class="co">#&gt;```r</span></span>
<span><span class="co"># 10) Save forecast plot to HTML</span></span>
<span><span class="co">#&gt;htmlwidgets::saveWidget(</span></span>
<span><span class="co">#&gt;  widget = final_state$forecasting_result,</span></span>
<span><span class="co">#&gt;  file = "forecast_dark_plot.html",</span></span>
<span><span class="co">#&gt;  selfcontained = TRUE</span></span>
<span><span class="co">#&gt;)</span></span>
<span><span class="co">#&gt;```</span></span></code></pre></div>
<div class="section level4">
<h4 id="forecast-plot-light-mode">Forecast Plot: Light Mode<a class="anchor" aria-label="anchor" href="#forecast-plot-light-mode"></a>
</h4>
<!--html_preserve-->
<iframe src="assets/forecast_light_plot.html" style="
  width:100%;
  height:300px;
  /* solid black 2-px border */
  border:2px solid #000;
  /* rounded corners */
  border-radius:4px;
">
</iframe>
<!--/html_preserve-->
</div>
<div class="section level4">
<h4 id="forecast-plot-dark-mode">Forecast Plot: Dark Mode<a class="anchor" aria-label="anchor" href="#forecast-plot-dark-mode"></a>
</h4>
<!--html_preserve-->
<iframe src="assets/forecast_dark_plot.html" style="
  width:100%;
  height:300px;
  /* solid black 2-px border */
  border:2px solid #000;
  /* rounded corners */
  border-radius:4px;
">
</iframe>
<!--/html_preserve-->
</div>
</div>
<div class="section level3">
<h3 id="id_8-data-wrangling-agent">8. Data Wrangling Agent<a class="anchor" aria-label="anchor" href="#id_8-data-wrangling-agent"></a>
</h3>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/knowusuboaky/LLMAgentR" class="external-link">LLMAgentR</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 1) Simulate multiple data frames with a common ID</span></span>
<span><span class="va">df1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  ID <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">4</span><span class="op">)</span>,</span>
<span>  Name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"John"</span>, <span class="st">"Jane"</span>, <span class="st">"Jim"</span>, <span class="st">"Jill"</span><span class="op">)</span>,</span>
<span>  stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">df2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  ID <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">4</span><span class="op">)</span>,</span>
<span>  Age <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">25</span>, <span class="fl">30</span>, <span class="fl">35</span>, <span class="fl">40</span><span class="op">)</span>,</span>
<span>  stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">df3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  ID <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">4</span><span class="op">)</span>,</span>
<span>  Education <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Bachelors"</span>, <span class="st">"Masters"</span>, <span class="st">"PhD"</span>, <span class="st">"MBA"</span><span class="op">)</span>,</span>
<span>  stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 2) Combine into a list</span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">df1</span>, <span class="va">df2</span>, <span class="va">df3</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 3) Create the agent</span></span>
<span><span class="va">data_wrangling_agent</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/build_data_wrangling_agent.html">build_data_wrangling_agent</a></span><span class="op">(</span></span>
<span>  model <span class="op">=</span> <span class="va">my_llm_wrapper</span>,</span>
<span>  human_validation <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  bypass_recommended_steps <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  bypass_explain_code <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 4) Define the initial state</span></span>
<span><span class="va">initial_state</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  data_raw <span class="op">=</span> <span class="va">data</span>,</span>
<span>  user_instructions <span class="op">=</span> <span class="st">"Merge the data frames on the ID column."</span>,</span>
<span>  max_retries <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  retry_count <span class="op">=</span> <span class="fl">0</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 5) Run the agent</span></span>
<span><span class="va">final_state</span> <span class="op">&lt;-</span> <span class="fu">data_wrangling_agent</span><span class="op">(</span><span class="va">initial_state</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 6) View the wrangled data</span></span>
<span><span class="va">final_state</span><span class="op">$</span><span class="va">data_wrangled</span></span>
<span><span class="co">#&gt; A tibble: 4 × 6</span></span>
<span><span class="co">#&gt;      ID Name    Age Education Age_Group Name_Length</span></span>
<span><span class="co">#&gt;   &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;           &lt;int&gt;</span></span>
<span><span class="co">#&gt; 1     1 John     25 Bachelors 20-29               4</span></span>
<span><span class="co">#&gt; 2     2 Jane     30 Masters   30-39               4</span></span>
<span><span class="co">#&gt; 3     3 Jim      35 PhD       30-39               3</span></span>
<span><span class="co">#&gt; 4     4 Jill     40 MBA       40+                 4</span></span>
<span><span class="co">#&gt; ```</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ```r</span></span>
<span><span class="co"># 7) Convert to data.frame for printing</span></span>
<span><span class="va">wrangler_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="va">final_state</span><span class="op">$</span><span class="va">data_wrangled</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">wrangler_df</span><span class="op">)</span></span>
<span><span class="co">#&gt;   ID Name Age Education Age_Group Name_Length</span></span>
<span><span class="co">#&gt; 1  1 John  25 Bachelors     20-29           4</span></span>
<span><span class="co">#&gt; 2  2 Jane  30   Masters     30-39           4</span></span>
<span><span class="co">#&gt; 3  3  Jim  35       PhD     30-39           3</span></span>
<span><span class="co">#&gt; 4  4 Jill  40       MBA       40+           4</span></span>
<span><span class="co">#&gt; ```</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ```r</span></span>
<span><span class="co">#&gt; # 8) View the generated wrangler function</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="va">final_state</span><span class="op">$</span><span class="va">data_wrangler_function</span><span class="op">)</span></span>
<span><span class="co">#&gt; data_wrangler &lt;- function(data_list) {</span></span>
<span><span class="co">#&gt;   # 1. Validate input</span></span>
<span><span class="co">#&gt;   if (!(is.data.frame(data_list) || is.list(data_list))) stop("`data_list` must be a data.frame or list of data.frames.")</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   # 2. Load required packages</span></span>
<span><span class="co">#&gt;   for (pkg in c("dplyr", "tidyr", "purrr", "stringr")) {</span></span>
<span><span class="co">#&gt;     if (!requireNamespace(pkg, quietly = TRUE)) stop(sprintf("Package '%s' is required.", pkg))</span></span>
<span><span class="co">#&gt;   }</span></span>
<span><span class="co">#&gt;   suppressPackageStartupMessages({</span></span>
<span><span class="co">#&gt;     library(dplyr); library(tidyr); library(purrr); library(stringr)</span></span>
<span><span class="co">#&gt;   })</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   # 3. Normalize input to list of tibbles</span></span>
<span><span class="co">#&gt;   if (is.data.frame(data_list)) data_list &lt;- list(data_list)</span></span>
<span><span class="co">#&gt;   data_list &lt;- purrr::map(data_list, tibble::as_tibble)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   # 4. Merge/join datasets by ID</span></span>
<span><span class="co">#&gt;   data_wrangled &lt;- purrr::reduce(data_list, dplyr::left_join, by = "ID")</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   # 5. Reorder columns</span></span>
<span><span class="co">#&gt;   data_wrangled &lt;- data_wrangled %&gt;% dplyr::select(ID, Name, Age, Education)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   # 6. Ensure correct types</span></span>
<span><span class="co">#&gt;   data_wrangled &lt;- data_wrangled %&gt;%</span></span>
<span><span class="co">#&gt;     dplyr::mutate(</span></span>
<span><span class="co">#&gt;       ID = as.numeric(ID),</span></span>
<span><span class="co">#&gt;       Name = as.character(Name),</span></span>
<span><span class="co">#&gt;       Age = as.numeric(Age),</span></span>
<span><span class="co">#&gt;       Education = as.character(Education)</span></span>
<span><span class="co">#&gt;     )</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   # 7. Feature engineering</span></span>
<span><span class="co">#&gt;   data_wrangled &lt;- data_wrangled %&gt;%</span></span>
<span><span class="co">#&gt;     dplyr::mutate(</span></span>
<span><span class="co">#&gt;       Age_Group = dplyr::case_when(</span></span>
<span><span class="co">#&gt;         Age &gt;= 20 &amp; Age &lt; 30 ~ "20-29",</span></span>
<span><span class="co">#&gt;         Age &gt;= 30 &amp; Age &lt; 40 ~ "30-39",</span></span>
<span><span class="co">#&gt;         TRUE ~ "40+"</span></span>
<span><span class="co">#&gt;       ),</span></span>
<span><span class="co">#&gt;       Name_Length = stringr::str_length(Name)</span></span>
<span><span class="co">#&gt;     )</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   # 8. Check for missing data</span></span>
<span><span class="co">#&gt;   if (any(is.na(data_wrangled))) stop("There are missing values in the dataset.")</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   # 9. Return final tibble</span></span>
<span><span class="co">#&gt;   return(data_wrangled)</span></span>
<span><span class="co">#&gt; }</span></span>
<span><span class="co">#&gt; ```</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ```r</span></span>
<span><span class="co"># 9) View the name of the generated function</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="va">final_state</span><span class="op">$</span><span class="va">data_wrangler_function_name</span><span class="op">)</span></span>
<span><span class="co">#&gt; data_wrangler</span></span>
<span><span class="co">#&gt; ```</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="id_9-weather-agent">9. Weather Agent<a class="anchor" aria-label="anchor" href="#id_9-weather-agent"></a>
</h3>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/knowusuboaky/LLMAgentR" class="external-link">LLMAgentR</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Get weather information</span></span>
<span><span class="va">weather_agent</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/build_weather_agent.html">build_weather_agent</a></span><span class="op">(</span></span>
<span>  llm <span class="op">=</span> <span class="va">my_llm_wrapper</span>,</span>
<span>  location_query <span class="op">=</span> <span class="st">"Tokyo, Japan"</span>,</span>
<span>  system_prompt <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  weather_api_key <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  units <span class="op">=</span> <span class="st">"metric"</span>, <span class="co">#metric or imperial</span></span>
<span>  n_tries <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  backoff <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  endpoint_url <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Print formatted weather response</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="va">weather_agent</span><span class="op">$</span><span class="va">llm_response</span><span class="op">)</span></span>
<span><span class="co">#&gt; Tokyo, Japan is experiencing scattered clouds with a temperature of 21.1°C. </span></span>
<span><span class="co">#&gt; The humidity is at 49%, and there is a wind speed of 10.8 m/s. </span></span>
<span><span class="co">#&gt; The atmospheric pressure is 1014 hPa.</span></span>
<span><span class="co">#&gt; ```</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ```r</span></span>
<span><span class="co"># Access raw weather data if needed</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">weather_agent</span><span class="op">$</span><span class="va">weather_raw</span><span class="op">)</span></span>
<span><span class="co">#&gt; List of 13</span></span>
<span><span class="co">#&gt;  $ coord     :List of 2</span></span>
<span><span class="co">#&gt;   ..$ lon: num 140</span></span>
<span><span class="co">#&gt;   ..$ lat: num 35.7</span></span>
<span><span class="co">#&gt;  $ weather   :List of 1</span></span>
<span><span class="co">#&gt;   ..$ :List of 4</span></span>
<span><span class="co">#&gt;   .. ..$ id         : int 802</span></span>
<span><span class="co">#&gt;   .. ..$ main       : chr "Clouds"</span></span>
<span><span class="co">#&gt;   .. ..$ description: chr "scattered clouds"</span></span>
<span><span class="co">#&gt;   .. ..$ icon       : chr "03d"</span></span>
<span><span class="co">#&gt;  $ base      : chr "stations"</span></span>
<span><span class="co">#&gt;  $ main      :List of 8</span></span>
<span><span class="co">#&gt;   ..$ temp      : num 21.1</span></span>
<span><span class="co">#&gt;   ..$ feels_like: num 20.6</span></span>
<span><span class="co">#&gt;   ..$ temp_min  : num 19.8</span></span>
<span><span class="co">#&gt;   ..$ temp_max  : num 22.6</span></span>
<span><span class="co">#&gt;   ..$ pressure  : int 1014</span></span>
<span><span class="co">#&gt;   ..$ humidity  : int 49</span></span>
<span><span class="co">#&gt;   ..$ sea_level : int 1014</span></span>
<span><span class="co">#&gt;   ..$ grnd_level: int 1012</span></span>
<span><span class="co">#&gt;  $ visibility: int 10000</span></span>
<span><span class="co">#&gt;  $ wind      :List of 2</span></span>
<span><span class="co">#&gt;   ..$ speed: num 10.8</span></span>
<span><span class="co">#&gt;   ..$ deg  : int 200</span></span>
<span><span class="co">#&gt;  $ clouds    :List of 1</span></span>
<span><span class="co">#&gt;   ..$ all: int 40</span></span>
<span><span class="co">#&gt;  $ dt        : int 1745726159</span></span>
<span><span class="co">#&gt;  $ sys       :List of 5</span></span>
<span><span class="co">#&gt;   ..$ type   : int 2</span></span>
<span><span class="co">#&gt;   ..$ id     : int 268395</span></span>
<span><span class="co">#&gt;   ..$ country: chr "JP"</span></span>
<span><span class="co">#&gt;   ..$ sunrise: int 1745697236</span></span>
<span><span class="co">#&gt;   ..$ sunset : int 1745745817</span></span>
<span><span class="co">#&gt;  $ timezone  : int 32400</span></span>
<span><span class="co">#&gt;  $ id        : int 1850144</span></span>
<span><span class="co">#&gt;  $ name      : chr "Tokyo"</span></span>
<span><span class="co">#&gt;  $ cod       : int 200</span></span>
<span><span class="co">#&gt; ```</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="id_10-feature-engineering-agent">10. Feature Engineering Agent<a class="anchor" aria-label="anchor" href="#id_10-feature-engineering-agent"></a>
</h3>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/knowusuboaky/LLMAgentR" class="external-link">LLMAgentR</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 1) Load the data</span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="st">"tests/testthat/test-data/churn_data.csv"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 2) Create the feature engineering agent</span></span>
<span><span class="va">feature_engineering_agent</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/build_feature_engineering_agent.html">build_feature_engineering_agent</a></span><span class="op">(</span></span>
<span>  model <span class="op">=</span> <span class="va">my_llm_wrapper</span>,</span>
<span>  human_validation <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  bypass_recommended_steps <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  bypass_explain_code <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 3) Define the initial state</span></span>
<span><span class="va">initial_state</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  data_raw <span class="op">=</span> <span class="va">data</span>,</span>
<span>  target_variable <span class="op">=</span> <span class="st">"Churn"</span>,</span>
<span>  user_instructions <span class="op">=</span> <span class="st">"Inspect the data. Make any new features and transformations that you think will be useful for predicting the target variable. "</span>,</span>
<span>  max_retries <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  retry_count <span class="op">=</span> <span class="fl">0</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 4) Run the agent</span></span>
<span><span class="va">final_state</span> <span class="op">&lt;-</span> <span class="fu">feature_engineering_agent</span><span class="op">(</span><span class="va">initial_state</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#&gt;```r</span></span>
<span><span class="co"># 5) Convert to data.frame if needed</span></span>
<span><span class="va">engineered_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="va">final_state</span><span class="op">$</span><span class="va">data_engineered</span><span class="op">)</span></span>
<span><span class="co">#&gt;</span></span>
<span><span class="co"># 6) View the result (first 10 rows)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">engineered_df</span>, <span class="fl">10</span><span class="op">)</span></span>
<span><span class="co">#&gt;    SeniorCitizen tenure MonthlyCharges TotalCharges gender_Male Partner_No Dependents_Yes PhoneService_Yes</span></span>
<span><span class="co">#&gt; 1              0      1          29.85        29.85           0          0              0                0</span></span>
<span><span class="co">#&gt; 2              0     34          56.95      1889.50           1          1              0                1</span></span>
<span><span class="co">#&gt; 3              0      2          53.85       108.15           1          1              0                1</span></span>
<span><span class="co">#&gt; 4              0     45          42.30      1840.75           1          1              0                0</span></span>
<span><span class="co">#&gt; 5              0      2          70.70       151.65           0          1              0                1</span></span>
<span><span class="co">#&gt; 6              0      8          99.65       820.50           0          1              0                1</span></span>
<span><span class="co">#&gt; 7              0     22          89.10      1949.40           1          1              1                1</span></span>
<span><span class="co">#&gt; 8              0     10          29.75       301.90           0          1              0                0</span></span>
<span><span class="co">#&gt; 9              0     28         104.80      3046.05           0          0              0                1</span></span>
<span><span class="co">#&gt; 10             0     62          56.15      3487.95           1          1              1                1</span></span>
<span><span class="co">#&gt; (…additional columns: MultipleLines, InternetService, OnlineSecurity, etc…)</span></span>
<span><span class="co">#&gt;```</span></span>
<span><span class="co">#&gt;</span></span>
<span><span class="co">#&gt;```r</span></span>
<span><span class="co"># 7) View the explanation report from the LLM</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="va">final_state</span><span class="op">$</span><span class="va">feature_engineering_report</span><span class="op">)</span></span>
<span><span class="co">#&gt; Detailed explanation covering:</span></span>
<span><span class="co">#&gt; - ID column removal</span></span>
<span><span class="co">#&gt; - Type conversions</span></span>
<span><span class="co">#&gt; - Missing value handling</span></span>
<span><span class="co">#&gt; - One-hot encoding</span></span>
<span><span class="co">#&gt; - Feature interactions (e.g., tenure, MonthlyCharges)</span></span>
<span><span class="co">#&gt; - No PCA components included</span></span>
<span><span class="co">#&gt; - Final review checks</span></span>
<span><span class="co">#&gt;```</span></span>
<span><span class="co">#&gt;</span></span>
<span><span class="co">#&gt;```r</span></span>
<span><span class="co"># 8) View the generated feature engineering function</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="va">final_state</span><span class="op">$</span><span class="va">feature_engineer_function</span><span class="op">)</span></span>
<span><span class="co">#&gt; clean_names(), safe_select(), safe_dummy_cols(), safe_lump_high_card() helpers</span></span>
<span><span class="co">#&gt; feature_engineer() main function that:</span></span>
<span><span class="co">#&gt;   - Cleans column names</span></span>
<span><span class="co">#&gt;   - Converts categorical columns</span></span>
<span><span class="co">#&gt;   - Imputes missing values</span></span>
<span><span class="co">#&gt;   - One-hot encodes factors</span></span>
<span><span class="co">#&gt;   - Removes ID and constant columns</span></span>
<span><span class="co">#&gt;   - Outputs a model-ready dataset</span></span>
<span><span class="co">#&gt;```</span></span>
<span><span class="co">#&gt;</span></span>
<span><span class="co">#&gt;```r</span></span>
<span><span class="co"># 9) View the function name</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="va">final_state</span><span class="op">$</span><span class="va">feature_engineer_function_name</span><span class="op">)</span></span>
<span><span class="co">#&gt; feature_engineer</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="id_11-visualization-agent">11. Visualization Agent<a class="anchor" aria-label="anchor" href="#id_11-visualization-agent"></a>
</h3>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/knowusuboaky/LLMAgentR" class="external-link">LLMAgentR</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 1) Load the data</span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="st">"tests/testthat/test-data/churn_data.csv"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 2) Create the visualization agent</span></span>
<span><span class="va">visualization_agent</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/build_visualization_agent.html">build_visualization_agent</a></span><span class="op">(</span></span>
<span>  model <span class="op">=</span> <span class="va">my_llm_wrapper</span>,</span>
<span>  human_validation <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  bypass_recommended_steps <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  bypass_explain_code <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 3) Define the initial state</span></span>
<span><span class="va">initial_state</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  data_raw <span class="op">=</span> <span class="va">data</span>,</span>
<span>  target_variable <span class="op">=</span> <span class="st">"Churn"</span>,</span>
<span>  user_instructions <span class="op">=</span> <span class="st">"Create a clean and visually appealing box plot to show the distribution of Monthly Charges across Churn categories.</span></span>
<span><span class="st">Use distinct colors for each Churn group, add clear axis labels, a legend, and a meaningful title."</span>,</span>
<span>  max_retries <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  retry_count <span class="op">=</span> <span class="fl">0</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 4) Run the agent</span></span>
<span><span class="va">final_state</span> <span class="op">&lt;-</span> <span class="fu">visualization_agent</span><span class="op">(</span><span class="va">initial_state</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" tabindex="-1"></a><span class="co">#&gt; ```r</span></span>
<span id="cb27-2"><a href="#cb27-2" tabindex="-1"></a><span class="co"># 5) View the structure of the final state</span></span>
<span id="cb27-3"><a href="#cb27-3" tabindex="-1"></a><span class="fu">str</span>(final_state)</span>
<span id="cb27-4"><a href="#cb27-4" tabindex="-1"></a><span class="co">#&gt; List of components including:</span></span>
<span id="cb27-5"><a href="#cb27-5" tabindex="-1"></a><span class="co">#&gt; - visualization_code</span></span>
<span id="cb27-6"><a href="#cb27-6" tabindex="-1"></a><span class="co">#&gt; - visualization_result (the plotly object)</span></span>
<span id="cb27-7"><a href="#cb27-7" tabindex="-1"></a><span class="co">#&gt; - code_explanation</span></span>
<span id="cb27-8"><a href="#cb27-8" tabindex="-1"></a><span class="co">#&gt; - execution_success</span></span>
<span id="cb27-9"><a href="#cb27-9" tabindex="-1"></a><span class="co">#&gt; - timestamp</span></span>
<span id="cb27-10"><a href="#cb27-10" tabindex="-1"></a><span class="co">#&gt; ```</span></span>
<span id="cb27-11"><a href="#cb27-11" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb27-12"><a href="#cb27-12" tabindex="-1"></a><span class="co">#&gt; ```r</span></span>
<span id="cb27-13"><a href="#cb27-13" tabindex="-1"></a><span class="co"># 6) View the generated interactive plot (Plotly)</span></span>
<span id="cb27-14"><a href="#cb27-14" tabindex="-1"></a>final_state<span class="sc">$</span>visualization_result</span>
<span id="cb27-15"><a href="#cb27-15" tabindex="-1"></a><span class="co">#&gt; Displays an interactive box plot of MonthlyCharges by Churn</span></span>
<span id="cb27-16"><a href="#cb27-16" tabindex="-1"></a><span class="co">#&gt; ```</span></span>
<span id="cb27-17"><a href="#cb27-17" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb27-18"><a href="#cb27-18" tabindex="-1"></a><span class="co">#&gt; ```r</span></span>
<span id="cb27-19"><a href="#cb27-19" tabindex="-1"></a><span class="co"># 7) Save the plot to an HTML file</span></span>
<span id="cb27-20"><a href="#cb27-20" tabindex="-1"></a><span class="co">#&gt; htmlwidgets::saveWidget(</span></span>
<span id="cb27-21"><a href="#cb27-21" tabindex="-1"></a><span class="co">#&gt;   widget = final_state$visualization_result,</span></span>
<span id="cb27-22"><a href="#cb27-22" tabindex="-1"></a><span class="co">#&gt;   file = "monthly_charges_vs_churn.html",</span></span>
<span id="cb27-23"><a href="#cb27-23" tabindex="-1"></a><span class="co">#&gt;   selfcontained = TRUE</span></span>
<span id="cb27-24"><a href="#cb27-24" tabindex="-1"></a><span class="co">#&gt; )</span></span>
<span id="cb27-25"><a href="#cb27-25" tabindex="-1"></a>Saves the interactive plot as a standalone HTML file<span class="sc">:</span> <span class="st">"monthly_charges_vs_churn.html"</span></span>
<span id="cb27-26"><a href="#cb27-26" tabindex="-1"></a><span class="co">#&gt; ```</span></span></code></pre></div>
<div class="section level4">
<h4 id="box-plot">Box Plot<a class="anchor" aria-label="anchor" href="#box-plot"></a>
</h4>
<!--html_preserve-->
<iframe src="assets/monthly_charges_vs_churn.html" style="
  width:100%;
  height:300px;
  /* solid black 2-px border */
  border:2px solid #000;
  /* rounded corners */
  border-radius:4px;
">
</iframe>
<!--/html_preserve-->
</div>
</div>
</div>
<div class="section level2">
<h2 id="license">License<a class="anchor" aria-label="anchor" href="#license"></a>
</h2>
<p>MIT © <a href="mailto:kwadwo.owusuboakye@outlook.com">Kwadwo Daddy Nyame Owusu Boakye</a></p>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/knowusuboaky/LLMAgentR/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/knowusuboaky/LLMAgentR/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing LLMAgentR</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Kwadwo Daddy Nyame Owusu Boakye <br><small class="roles"> Author, maintainer </small>  </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://opensource.org/licenses/MIT" class="external-link"><img src="https://img.shields.io/badge/License-MIT-blue.svg" alt="License: MIT"></a></li>
<li><a href="https://cran.r-project.org/package=LLMAgentR" class="external-link"><img src="https://www.r-pkg.org/badges/version/LLMAgentR" alt="CRAN status"></a></li>
<li><a href="https://cranlogs.r-pkg.org/badges/grand-total/LLMAgentR" class="external-link"><img src="https://cranlogs.r-pkg.org/badges/grand-total/LLMAgentR?color=orange" alt="Total Downloads"></a></li>
<li><a href="https://github.com/knowusuboaky/LLMAgentR/commits/main" class="external-link"><img src="https://img.shields.io/github/last-commit/knowusuboaky/LLMAgentR.svg" alt="Last Commit"></a></li>
<li><a href="https://github.com/knowusuboaky/LLMAgentR/issues" class="external-link"><img src="https://img.shields.io/github/issues/knowusuboaky/LLMAgentR.svg" alt="Issues"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Kwadwo Daddy Nyame Owusu Boakye.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
